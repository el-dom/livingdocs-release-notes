
# Release Notes

## Involved Repositories

#### `livingdocs-editor`

- from version `Release 2017-07` -> `v20.6.1`
- link to the release: https://github.com/upfrontIO/livingdocs-editor/tree/v20.6.1
- livingdocs-framework version: `^7.9.0`

#### `livingdocs-server`

- from version `Release 2017-07` -> `v57.0.0`
- link to the release: https://github.com/upfrontIO/livingdocs-server/tree/v57.0.0
- livingdocs-framework version: `^7.8.0`

#### `livingdocs-framework` 

- from version `v7.8.0` -> `v7.11.0`
- link to the release: https://github.com/upfrontIO/livingdocs-framework/tree/v7.11.0

## Component changes

Component | Type | Description | PRs | Issues
--- | --- | --- | --- | ---
Server | Feature | Support disabling gzip compression to support offloading it to a loadbalancer. [Read more](#support-disabling-and-gzip-compression) | [#1575](https://github.com/upfrontIO/livingdocs-server/pull/1575) | -
Server | Improvement | Lock xml2js to 0.4.17 | [#06b96aaa](https://github.com/upfrontIO/livingdocs-server/commit/06b96aaa) | -
Server | Bugfix | Enable cdata and update update xml2js to 0.4.18 | [#1580](https://github.com/upfrontIO/livingdocs-server/pull/1580) | -
Server | Improvement, Bugfix | Convert document API to JS | [#1582](https://github.com/upfrontIO/livingdocs-server/pull/1582) | [#1348](https://github.com/upfrontIO/livingdocs-planning/issues/1348)
Server | Feature | Register shutdown handlers. [Read more](#register-shutdown-handlers) | [#1590](https://github.com/upfrontIO/livingdocs-server/pull/1590) | -
Server | Feature | Register and executer server series of initializedHooks | [#1598](https://github.com/upfrontIO/livingdocs-server/pull/1598) | -
Server | Feature | Allow integrators to use different node versions [Read more](#allow-integrators-to-use-different-node-versions) | [#1593](https://github.com/upfrontIO/livingdocs-server/pull/1593) | -
Server | Feature | Integrate Release-Tools v1.5.1 [Read more](#intagrate-releasetools) | [#1594](https://github.com/upfrontIO/livingdocs-server/pull/1594) | [#1563](https://github.com/upfrontIO/livingdocs-planning/issues/1363)
Server | BREAKING CHANGE | Move dnd-import to import API [Read more](#move-dnd-import-to-import-api) | [#1591](https://github.com/upfrontIO/livingdocs-server/pull/1591) | [Epic](https://github.com/upfrontIO/livingdocs-planning/issues/1331), [#1368](https://github.com/upfrontIO/livingdocs-planning/issues/1368)

## In detail

## Support disabling gzip compression

Support disabling gzip compression to support offloading it by a loadbalancer. Gzip compression offloading to a load balancer results in a better performance. To disable gzip compression on the server, you can set `server.gzip = false`.

## Register shutdown handlers

Register `process` shutdown handlers in the core. This way we can use our logger also for unhandled exceptions and other process termination events.

In the future we can extend the handlers to properly end active connections where possible.

#### New server configuration option

The server can now be configured to properly log unexpected errors with the server logger. These logs have the log level `fatal`. It also logs `info` log messages on `SIGTERM` and on process `exit`. By default this option is disabled.

```js
registerShutdownHandlers: true // defaults to `false`
```

#### Exposed log level `fatal`

The log level `fatal` is now exposed in the server api:
```js
liServer.log.fatal('ups')
```

## Allow integrators to use different node versions

We'll still use the suggested node version defined in the .nvmrc file.

## Integrate Release-Tools v1.5.1

- With the introduction of the release-tools it's possible to create and maintain a maintenance branch for an old version with a proper semantic-release approach. You can read more here.
- Besides that we also introduced a check to verify that on a maintenance branch only patch commits are allowed.

## Move dnd-import to import API

* Endpoint `/text/import` changed from get to post.
* Document transform files not used anymore.
* Configuration for hugo import added.
* Hugo import now requires custom code.

Example Configuration

```
hugo:
    targets:
      basePath: path.resolve('./plugins/hugo-import-transformations')
      articleAgency:
        dir: 'agency'
        layouts: [
          design: 'domenica'
          layout: 'regular'
          transformation: 'nzzas_regular'
        ]
      articleArchive:
        dir: 'archive'
        layouts: [
          design: 'morpheus'
          layout: 'regular'
          transformation: 'web_regular'
        ]
```
